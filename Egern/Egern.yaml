# Update-2025.12.16 11.42
# å›¾æ ‡å¤‡ç”¨ğŸ“®âœ‰ï¸ğŸ“ªğŸ“¬ğŸ’«ğŸ’¬ğŸ’¥ğŸ”¨ğŸ¥¼ğŸš«ğŸ”°ğŸ™ˆğŸğŸ¬ğŸ“ºğŸ±ğŸğŸğŸ¦ğŸ’¡ğŸŒµğŸ¯ğŸ¸ğŸ’»ğŸ“½ğŸŒğŸ•¹ğŸ“¡ğŸ¦‘ğŸŒŸğŸ·ğŸ¦’ğŸ³ğŸš¦ğŸ“µğŸ§ğŸ’ŠğŸ”“ğŸš¦ğŸš¥ğŸ¼â›”ï¸ğŸˆ²ğŸŒğŸ¯ğŸ–²ï¸ğŸ¦ğŸ”ğŸµğŸ“±ğŸš€ğŸ’³â™»ï¸ğŸ™ˆğŸ±ğŸ”‚ğŸ“¦ğŸ”€â±

# è‡ªåŠ¨æ›´æ–°é…ç½® (å¦‚éœ€å¯ç”¨è¯·å–æ¶ˆæ³¨é‡Š)
# auto_update:
#   url: https://raw.githubusercontent.com/smallsun107/Profiles/refs/heads/main/Egern/Egern.yaml
#   interval: 86400

# åŸºç¡€é…ç½®
ipv6: false
http_port: 3080
socks_port: 3090
allow_external_connections: true
vif_only: true
hide_vpn_icon: false
# DNS åŠ«æŒ
hijack_dns:
  - '*:53'
# æ•°æ®åº“ URL é…ç½®
geoip_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
asn_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/GeoLite2-ASN.mmdb
# å»¶è¿Ÿæµ‹è¯•
proxy_latency_test_url: http://www.google.com/generate_204
direct_latency_test_url: http://www.baidu.com
# è·¯ç”±é…ç½®
compat_route: false
include_all_networks: false
include_apns: false
include_cellular_services: false
include_local_networks: false

dns:
  bootstrap:
    - system
    - 223.5.5.5
    - 114.114.114.114
  upstreams:
    China:
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
    Global:
      - https://dns.google/dns-query
      - https://1.1.1.1/dns-query
  forward:
    # æ³¨æ„ï¼šä½¿ç”¨ rule_set åˆ†æµ DNS ä¼šå¢åŠ å†…å­˜å¼€é”€ï¼Œå¦‚é‡å¡é¡¿å¯å°è¯•æ³¨é‡Šä¸‹æ–¹ block
    - proxy_rule_set:
        match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax_All.list
        value: China
    - wildcard:
        match: '*'
        value: Global
  public_ip_lookup_url: https://ifconfig.me/ip

proxies:
  - vmess:
      name: â˜ï¸ Server 00
      server: 1.1.1.1
      port: 443
      user_id: "uuid"
      security: auto
      transport:
        wss:
          path: /rss
          headers:
            Host: 1.1.1.1
          sni: 1.1.1.1
          skip_tls_verify: false


# ç­–ç•¥ç»„é…ç½®
policy_groups:
  - external:
      name: ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      type: select
      urls:
        - "å¯ä»¥æ˜¯æœ¬åœ°è·¯å¾„æˆ–è¿œç¨‹ä»£ç†é“¾æ¥"
      update_interval: 86400
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Select.png

  - select:
      name: âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ¶ æœ¬åœ°èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Available.png

  - select:
      name: ğŸ¶ æœ¬åœ°èŠ‚ç‚¹
      policies:
        - â˜ï¸ CMI 00
        - â˜ï¸ RackNerd 00
        - â˜ï¸ RackNerd 01
        - â˜ï¸ RackNerdHome 00
        - â˜ï¸ RackNerdHome 01
        - â˜ï¸ RackNerdWork 00
        - â˜ï¸ RackNerdWork 01
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Reject.orig.png

  - select:
      name: ğŸ“² ç”µæŠ¥ä¿¡æ¯
      policies:
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Telegram.png

  - select:
      name: ğŸ“¹ æ²¹ç®¡è§†é¢‘
      policies:
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/YouTube.png

  - select:
      name: ğŸ“½ å“”å“©å“”å“©
      policies:
        - DIRECT
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/BiliBili.png

  - select:
      name: ğŸ¿ å›½å¤–åª’ä½“
      policies:
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/StreamingSE.png

  - select:
      name: ğŸ” å›½å†…åª’ä½“
      policies:
        - DIRECT
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Streaming.png

  - select:
      name: ğŸ¶ æŠ–éŸ³
      policies:
        - DIRECT
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/TripAdvisor.png

  - select:
      name: ğŸµ TikTok
      policies:
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/TikTok.png

  - select:
      name: â“‚ï¸ å¾®è½¯æœåŠ¡
      policies:
        - DIRECT
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Microsoft.png

  - select:
      name: ğŸŸ OpenAI
      policies:
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Orz-3/mini/master/Alpha/Nucleus.png

  - select:
      name: ğŸ è‹¹æœæœåŠ¡
      policies:
        - DIRECT
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Apple.png

  - select:
      name: ğŸ® æ¸¸æˆå¹³å°
      policies:
        - DIRECT
        - âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
        - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
        - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
        - ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
        - ğŸŒ CDNèŠ‚ç‚¹
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Steam.png

  - select:
      name: ğŸ›‘ å…¨çƒæ‹¦æˆª
      policies:
        - REJECT
        - DIRECT
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Reject.png

  - select:
      name: ğŸŒ CDNèŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: Oracle|Rack|Apple|Router|BPB|CDN
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Airport.png

  - select:
      name: ğŸ›°ï¸ ä¸“çº¿èŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: VmShell|CMI
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/RoundRobin.png

  - auto_test:
      name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: ğŸ‡­ğŸ‡°|æ¸¯|Hong|HK
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Rounded_Rectangle/Hong_Kong.png

  - auto_test:
      name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: ğŸ‡¨ğŸ‡³|å°|Tai|TW
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Rounded_Rectangle/Taiwan.png

  - auto_test:
      name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: ğŸ‡ºğŸ‡¸|ç¾|States|US
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Rounded_Rectangle/United_States.png

  - auto_test:
      name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: ğŸ‡¯ğŸ‡µ|æ—¥|Japan|JP
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Rounded_Rectangle/Japan.png

  - auto_test:
      name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      policies:
        - ğŸ”¨ æ‰‹åŠ¨åˆ‡æ¢
      flatten: true
      filter: ğŸ‡¸ğŸ‡¬|æ–°|Singapore|SG
      icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Rounded_Rectangle/Singapore.png

# åˆ†æµè§„åˆ™
rules:
  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Telegram.yaml
      policy: ğŸ“² ç”µæŠ¥ä¿¡æ¯
  
  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/YouTube.yaml
      policy: ğŸ“¹ æ²¹ç®¡è§†é¢‘

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/BiliBili.yaml
      policy: ğŸ“½ å“”å“©å“”å“©

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/GlobalMedia.yaml
      policy: ğŸ¿ å›½å¤–åª’ä½“

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/ChinaMedia.yaml
      policy: ğŸ” å›½å†…åª’ä½“
  
  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/DouYin.yaml
      policy: ğŸ¶ æŠ–éŸ³

  - rule_set:
      match:  https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/TikTok.yaml
      policy: ğŸµ TikTok
  
  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Microsoft.yaml
      policy: â“‚ï¸ å¾®è½¯æœåŠ¡

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/OpenAI.yaml
      policy: ğŸŸ OpenAI

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Apple.yaml
      policy: ğŸ è‹¹æœæœåŠ¡

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Epic.yaml
      policy: ğŸ® æ¸¸æˆå¹³å°
  
  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Steam.yaml
      policy: ğŸ® æ¸¸æˆå¹³å°
  
  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Xbox.yaml
      policy: ğŸ® æ¸¸æˆå¹³å°

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Proxy.yaml
      policy: âœˆï¸ èŠ‚ç‚¹é€‰æ‹©

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Lan.yaml
      policy: DIRECT

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/China.yaml
      policy: DIRECT

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/ChinaIPs.yaml
      policy: DIRECT

  - rule_set:
      match: https://raw.githubusercontent.com/smallsun107/0wnuse/main/Egern/Rules/Advertising.yaml
      policy: REJECT

  - geoip:
      match: CN
      policy: DIRECT
      no_resolve: true
  
  - domain_suffix:
      match: '*.cn'
      policy: DIRECT
  
  - default:
      policy: âœˆï¸ èŠ‚ç‚¹é€‰æ‹©

# MITM é…ç½®
mitm:
  enabled: true
  ca_p12: Egern_CA.p12
  ca_passphrase: egern

# æ¨¡å—é…ç½®
modules:
  - name: 'iRingo: ğŸŒ¤ WeatherKit'
    url: https://github.com/NSRingo/WeatherKit/releases/latest/download/iRingo.WeatherKit.sgmodule
    enabled: true
  - name: DualSubs for YouTube
    url: https://github.com/DualSubs/YouTube/releases/latest/download/DualSubs.YouTube.sgmodule
    enabled: true
  - name: BoxJS
    url: https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.surge.sgmodule
    enabled: true
  - name: Script-Hub
    url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.surge.sgmodule
    enabled: true
  - name: Sub-Store
    url: https://raw.githubusercontent.com/sub-store-org/Sub-Store/master/config/Surge.sgmodule
    enabled: true
  - name: YouTube Enhance
    url: https://raw.githubusercontent.com/Maasea/sgmodule/master/YouTube.Enhance.sgmodule
    enabled: true
